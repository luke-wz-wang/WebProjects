{"ast":null,"code":"var _jsxFileName = \"/Users/sinzevivens/Documents/GitHub/mpcs52553/fp/src/App.js\";\nimport React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Table from \"react-bootstrap/Table\";\nimport ParticlesBg from \"particles-bg\";\nimport CurrentStocks from \"./CurrentStocks\";\nimport StockMarket from \"./StockMarket\";\nimport \"./App.css\";\nimport \"./animation.scss\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.purchaseStock = (symbol, numOfShares) => {\n      var market = this.state.market,\n          hold = this.state.hold;\n      var newStock = {};\n\n      for (var i = 0; i < this.state.market.length; i++) {\n        if (this.state.market[i][\"symbol\"] === symbol) {\n          newStock[\"symbol\"] = symbol;\n          newStock[\"company\"] = this.state.market[i][\"company\"];\n          newStock[\"price\"] = this.state.market[i][\"price\"];\n          newStock[\"numOfShares\"] = numOfShares;\n          newStock[\"totalValue\"] = parseFloat(numOfShares) * parseFloat(this.state.market[i][\"price\"]);\n        }\n      }\n\n      var hasStock = false;\n\n      if (this.state.hold != null) {\n        for (var i = 0; i < this.state.hold.length; i++) {\n          if (this.state.hold[i][\"symbol\"] === newStock[\"symbol\"]) {\n            hasStock = true;\n            hold[i][\"numOfShares\"] = parseInt(newStock[\"numOfShares\"]) + parseInt(hold[i][\"numOfShares\"]);\n            hold[i][\"totalValue\"] += newStock[\"totalValue\"];\n          }\n        }\n      }\n\n      if (hasStock === false) {\n        hold.push(newStock);\n      }\n\n      localStorage.setItem(\"market \", JSON.stringify(market));\n      this.setState({\n        hold: hold\n      });\n      localStorage.setItem(\"hold\", JSON.stringify(hold));\n      var totalShareValue = parseFloat(this.state.totalShareValue) + parseFloat(newStock[\"totalValue\"]);\n      totalShareValue = totalShareValue.toFixed(2);\n      this.setState({\n        totalShareValue: totalShareValue\n      });\n      localStorage.setItem(\"totalShareValue\", totalShareValue.toString());\n    };\n\n    this.stockOperations = (symbol, count) => {\n      var initNum;\n      count = parseInt(count);\n      var curStock;\n      var hold = this.state.hold;\n\n      for (var i = 0; i < this.state.hold.length; i++) {\n        if (this.state.hold[i][\"symbol\"] === symbol) {\n          curStock = this.state.hold[i];\n          initNum = parseInt(curStock.numOfShares);\n          const curNum = initNum + count;\n          var totalValue = parseFloat(curStock.price) * parseFloat(curNum).toFixed(2);\n          curStock.totalValue = totalValue;\n          curStock.numOfShares = curNum;\n\n          if (curNum === 0) {\n            hold.splice(i, 1);\n          }\n\n          var totalShareValue = parseFloat(this.state.totalShareValue) + parseFloat(count * curStock.price); //totalShareValue = parseFloat(totalShareValue).toFixed(2);\n\n          this.setState({\n            totalShareValue: totalShareValue.toFixed(2)\n          });\n          localStorage.setItem(\"totalShareValue\", totalShareValue.toFixed(2).toString());\n        }\n      }\n\n      this.setState({\n        hold: hold\n      });\n      localStorage.setItem(\"hold\", JSON.stringify(hold));\n    };\n\n    this.urlForStockInfo = stockSymbol => {\n      const api_key_param = \"token=pk_0450ab0ad32942a480c3e7330fd353c5 \";\n      const base_url = \"https://cloud.iexapis.com/stable/stock/\";\n      const api_url = `${base_url}${stockSymbol}/quote?${api_key_param}`;\n      return api_url;\n    };\n\n    this.state = {\n      hold: [],\n      market: [],\n      totalShareValue: 0.0,\n      sorted: {\n        symbol: 1,\n        price: 1,\n        totalValue: 1,\n        company: 1,\n        numOfShare: 1\n      },\n      sortedMarket: {\n        symbol: 1,\n        price: 1,\n        company: 1\n      }\n    };\n  }\n\n  componentDidMount() {\n    console.log(localStorage.getItem(\"market\")); //console.log(localStorage.getItem(\"market\").length);\n\n    if (localStorage.getItem(\"market\") === null || localStorage.getItem(\"market\").length < 5) {\n      console.log(\"market is null\");\n      const symbols = [\"CSCO\", \"ADBE\", \"NEW\", \"BAC\", \"A\", \"F\", \"C\", \"D\", \"X\", \"O\", \"K\", \"I\", \"V\", \"ATVI\", \"TXN\", \"AA\", \"DIS\", \"AMZN\", \"GOOGL\", \"XOM\", \"JNJ\", \"GE\", \"REAL\", \"MMM\"];\n      var all = [];\n\n      for (var i = 0; i < symbols.length; i++) {\n        const url = this.urlForStockInfo(symbols[i]);\n        fetch(url).then(r => r.json()).then(data => {\n          var stocks = {};\n          stocks[\"symbol\"] = data.symbol;\n          stocks[\"company\"] = data.companyName;\n          stocks[\"numOfShares\"] = 0;\n          stocks[\"price\"] = data.latestPrice;\n          stocks[\"totalValue\"] = 0;\n          all.push(stocks);\n          this.setState({\n            market: all\n          });\n        });\n      }\n\n      localStorage.setItem(\"market\", JSON.stringify(all));\n\n      if (localStorage.getItem(\"hold\") != null) {\n        this.setState({\n          hold: JSON.parse(localStorage.getItem(\"hold\"))\n        });\n      }\n\n      if (localStorage.getItem(\"totalShareValue\") != null) {\n        this.setState({\n          totalShareValue: parseFloat(localStorage.getItem(\"totalShareValue\"))\n        });\n      }\n    } else {\n      this.setState({\n        hold: JSON.parse(localStorage.getItem(\"hold\"))\n      });\n      this.setState({\n        market: JSON.parse(localStorage.getItem(\"market\"))\n      });\n      this.setState({\n        totalShareValue: parseFloat(localStorage.getItem(\"totalShareValue\"))\n      });\n    }\n  }\n\n  sortHold(e) {\n    const target = e.currentTarget.getAttribute(\"value\");\n    var sorted = this.state.sorted;\n\n    if (this.state.sorted[target] === -1) {\n      this.state.hold.sort(function (o1, o2) {\n        return o1[target] < o2[target] ? 1 : -1;\n      });\n      sorted[target] = 1;\n    } else {\n      this.state.hold.sort(function (o1, o2) {\n        return o1[target] < o2[target] ? -1 : 1;\n      });\n      sorted[target] = -1;\n    }\n\n    this.setState({\n      sorted: sorted\n    });\n    this.setState({\n      hold: this.state.hold\n    });\n  }\n\n  sortMarket(e) {\n    const target = e.currentTarget.getAttribute(\"value\");\n    var sortedMarket = this.state.sorted;\n\n    if (this.state.sortedMarket[target] === -1) {\n      this.state.market.sort(function (o1, o2) {\n        return o1[target] < o2[target] ? 1 : -1;\n      });\n      sortedMarket[target] = 1;\n    } else {\n      this.state.market.sort(function (o1, o2) {\n        return o1[target] < o2[target] ? -1 : 1;\n      });\n      sortedMarket[target] = -1;\n    }\n\n    this.setState({\n      sortedMarket: sortedMarket\n    });\n    this.setState({\n      market: this.state.market\n    });\n  }\n\n  render() {\n    let config = {\n      num: [4, 7],\n      rps: 0.1,\n      radius: [5, 40],\n      life: [1.5, 3],\n      v: [2, 3],\n      tha: [-40, 40],\n      alpha: [0.6, 0],\n      scale: [0.1, 0.4],\n      position: \"all\",\n      color: [\"random\", \"#ff0000\"],\n      cross: \"dead\",\n      // emitter: \"follow\",\n      random: 15\n    };\n\n    if (Math.random() > 0.85) {\n      config = Object.assign(config, {\n        onParticleUpdate: (ctx, particle) => {\n          ctx.beginPath();\n          ctx.rect(particle.p.x, particle.p.y, particle.radius * 2, particle.radius * 2);\n          ctx.fillStyle = particle.color;\n          ctx.fill();\n          ctx.closePath();\n        }\n      });\n    }\n\n    const recommends = this.state.market.map(stock => {\n      return React.createElement(StockMarket, {\n        stock: stock,\n        purchase: this.purchaseStock,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      });\n    });\n    const ownedStocks = this.state.hold.map(stock => {\n      return React.createElement(CurrentStocks, {\n        stock: stock,\n        change: this.stockOperations,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      });\n    });\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(ParticlesBg, {\n      type: \"custom\",\n      config: config,\n      bg: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }), \".bb\", React.createElement(\"div\", {\n      className: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"market-title\",\n      className: \"row\",\n      style: {\n        marginTop: \"40px\",\n        color: \"white\",\n        textAlign: \"left\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, \"Owned Stocks\"), React.createElement(\"div\", {\n      id: \"totalValue\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"Your total portfolio value : $\", this.state.totalShareValue), React.createElement(\"div\", {\n      className: \"row currentPortfolio\",\n      style: {\n        marginBottom: \"40px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"market-all\",\n      style: {\n        height: \"310px\",\n        width: \"100%\",\n        marginBottom: \"5px\",\n        padding: \"0px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"table table-hover table-responsive table-dark table-fixed\",\n      style: {\n        width: \"100%\",\n        height: \"320px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      style: {\n        width: \"100%\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      style: {\n        width: \"12%\"\n      },\n      onClick: e => this.sortHold(e),\n      value: \"symbol\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, \"Symbol\"), React.createElement(\"th\", {\n      style: {\n        width: \"25%\"\n      },\n      onClick: e => this.sortHold(e),\n      value: \"company\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, \"Company Name\"), React.createElement(\"th\", {\n      style: {\n        width: \"14%\"\n      },\n      onClick: e => this.sortHold(e),\n      value: \"numOfShares\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, \"Num of Shares\"), React.createElement(\"th\", {\n      style: {\n        width: \"16%\"\n      },\n      onClick: e => this.sortHold(e),\n      value: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, \"Current Price\"), React.createElement(\"th\", {\n      style: {\n        width: \"16%\"\n      },\n      onClick: e => this.sortHold(e),\n      value: \"totalValue\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    }, \"Total Share Value\"), React.createElement(\"th\", {\n      style: {\n        width: \"10%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319\n      },\n      __self: this\n    }, \"Amount\"), React.createElement(\"th\", {\n      style: {\n        width: \"10%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, \"Operation\"))), React.createElement(\"div\", {\n      className: \"scroll\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, ownedStocks)))))), React.createElement(\"div\", {\n      id: \"market-title\",\n      className: \"row\",\n      style: {\n        marginTop: \"40px\",\n        color: \"white\",\n        textAlign: \"left\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, \"Stocks & Funds\"), React.createElement(\"div\", {\n      className: \"row markets\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"market-table\",\n      style: {\n        height: \"300px\",\n        width: \"100%\",\n        marginBottom: \"15px\",\n        padding: \"0px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      id: \"market\",\n      className: \"table table-hover table-responsive table-dark table-fixed\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      style: {\n        width: \"100%\",\n        color: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      id: \"market-tr\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      style: {\n        width: \"17%\"\n      },\n      onClick: e => this.sortMarket(e),\n      value: \"symbol\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, \"Symbol\"), React.createElement(\"th\", {\n      style: {\n        width: \"36%\"\n      },\n      onClick: e => this.sortMarket(e),\n      value: \"company\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, \"Company Name\"), React.createElement(\"th\", {\n      style: {\n        width: \"20%\"\n      },\n      onClick: e => this.sortMarket(e),\n      value: \"price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, \"Market Price\"), React.createElement(\"th\", {\n      style: {\n        width: \"18%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, \"Amount\"), React.createElement(\"th\", {\n      id: \"submit\",\n      style: {\n        width: \"18%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, \"Operation\"))), React.createElement(\"div\", {\n      className: \"scroll\",\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, recommends)))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/sinzevivens/Documents/GitHub/mpcs52553/fp/src/App.js"],"names":["React","Component","Table","ParticlesBg","CurrentStocks","StockMarket","App","constructor","props","purchaseStock","symbol","numOfShares","market","state","hold","newStock","i","length","parseFloat","hasStock","parseInt","push","localStorage","setItem","JSON","stringify","setState","totalShareValue","toFixed","toString","stockOperations","count","initNum","curStock","curNum","totalValue","price","splice","urlForStockInfo","stockSymbol","api_key_param","base_url","api_url","sorted","company","numOfShare","sortedMarket","componentDidMount","console","log","getItem","symbols","all","url","fetch","then","r","json","data","stocks","companyName","latestPrice","parse","sortHold","e","target","currentTarget","getAttribute","sort","o1","o2","sortMarket","render","config","num","rps","radius","life","v","tha","alpha","scale","position","color","cross","random","Math","Object","assign","onParticleUpdate","ctx","particle","beginPath","rect","p","x","y","fillStyle","fill","closePath","recommends","map","stock","ownedStocks","marginTop","textAlign","marginBottom","width","height","padding"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,sCAAP;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAEA,OAAO,WAAP;AACA,OAAO,kBAAP;;AAEA,MAAMC,GAAN,SAAkBL,SAAlB,CAA4B;AAC1BM,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAyHnBC,aAzHmB,GAyHH,CAACC,MAAD,EAASC,WAAT,KAAyB;AACvC,UAAIC,MAAM,GAAG,KAAKC,KAAL,CAAWD,MAAxB;AAAA,UACEE,IAAI,GAAG,KAAKD,KAAL,CAAWC,IADpB;AAEA,UAAIC,QAAQ,GAAG,EAAf;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKH,KAAL,CAAWD,MAAX,CAAkBK,MAAtC,EAA8CD,CAAC,EAA/C,EAAmD;AACjD,YAAI,KAAKH,KAAL,CAAWD,MAAX,CAAkBI,CAAlB,EAAqB,QAArB,MAAmCN,MAAvC,EAA+C;AAC7CK,UAAAA,QAAQ,CAAC,QAAD,CAAR,GAAqBL,MAArB;AACAK,UAAAA,QAAQ,CAAC,SAAD,CAAR,GAAsB,KAAKF,KAAL,CAAWD,MAAX,CAAkBI,CAAlB,EAAqB,SAArB,CAAtB;AACAD,UAAAA,QAAQ,CAAC,OAAD,CAAR,GAAoB,KAAKF,KAAL,CAAWD,MAAX,CAAkBI,CAAlB,EAAqB,OAArB,CAApB;AACAD,UAAAA,QAAQ,CAAC,aAAD,CAAR,GAA0BJ,WAA1B;AACAI,UAAAA,QAAQ,CAAC,YAAD,CAAR,GACEG,UAAU,CAACP,WAAD,CAAV,GAA0BO,UAAU,CAAC,KAAKL,KAAL,CAAWD,MAAX,CAAkBI,CAAlB,EAAqB,OAArB,CAAD,CADtC;AAED;AACF;;AACD,UAAIG,QAAQ,GAAG,KAAf;;AACA,UAAI,KAAKN,KAAL,CAAWC,IAAX,IAAmB,IAAvB,EAA6B;AAC3B,aAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKH,KAAL,CAAWC,IAAX,CAAgBG,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;AAC/C,cAAI,KAAKH,KAAL,CAAWC,IAAX,CAAgBE,CAAhB,EAAmB,QAAnB,MAAiCD,QAAQ,CAAC,QAAD,CAA7C,EAAyD;AACvDI,YAAAA,QAAQ,GAAG,IAAX;AACAL,YAAAA,IAAI,CAACE,CAAD,CAAJ,CAAQ,aAAR,IACEI,QAAQ,CAACL,QAAQ,CAAC,aAAD,CAAT,CAAR,GACAK,QAAQ,CAACN,IAAI,CAACE,CAAD,CAAJ,CAAQ,aAAR,CAAD,CAFV;AAGAF,YAAAA,IAAI,CAACE,CAAD,CAAJ,CAAQ,YAAR,KAAyBD,QAAQ,CAAC,YAAD,CAAjC;AACD;AACF;AACF;;AACD,UAAII,QAAQ,KAAK,KAAjB,EAAwB;AACtBL,QAAAA,IAAI,CAACO,IAAL,CAAUN,QAAV;AACD;;AACDO,MAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCC,IAAI,CAACC,SAAL,CAAeb,MAAf,CAAhC;AACA,WAAKc,QAAL,CAAc;AAAEZ,QAAAA,IAAI,EAAEA;AAAR,OAAd;AACAQ,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeX,IAAf,CAA7B;AACA,UAAIa,eAAe,GACjBT,UAAU,CAAC,KAAKL,KAAL,CAAWc,eAAZ,CAAV,GACAT,UAAU,CAACH,QAAQ,CAAC,YAAD,CAAT,CAFZ;AAGAY,MAAAA,eAAe,GAAGA,eAAe,CAACC,OAAhB,CAAwB,CAAxB,CAAlB;AACA,WAAKF,QAAL,CAAc;AAAEC,QAAAA,eAAe,EAAEA;AAAnB,OAAd;AACAL,MAAAA,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCI,eAAe,CAACE,QAAhB,EAAxC;AACD,KA/JkB;;AAAA,SAiKnBC,eAjKmB,GAiKD,CAACpB,MAAD,EAASqB,KAAT,KAAmB;AACnC,UAAIC,OAAJ;AACAD,MAAAA,KAAK,GAAGX,QAAQ,CAACW,KAAD,CAAhB;AACA,UAAIE,QAAJ;AACA,UAAInB,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAtB;;AACA,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKH,KAAL,CAAWC,IAAX,CAAgBG,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;AAC/C,YAAI,KAAKH,KAAL,CAAWC,IAAX,CAAgBE,CAAhB,EAAmB,QAAnB,MAAiCN,MAArC,EAA6C;AAC3CuB,UAAAA,QAAQ,GAAG,KAAKpB,KAAL,CAAWC,IAAX,CAAgBE,CAAhB,CAAX;AACAgB,UAAAA,OAAO,GAAGZ,QAAQ,CAACa,QAAQ,CAACtB,WAAV,CAAlB;AACA,gBAAMuB,MAAM,GAAGF,OAAO,GAAGD,KAAzB;AACA,cAAII,UAAU,GACZjB,UAAU,CAACe,QAAQ,CAACG,KAAV,CAAV,GAA6BlB,UAAU,CAACgB,MAAD,CAAV,CAAmBN,OAAnB,CAA2B,CAA3B,CAD/B;AAEAK,UAAAA,QAAQ,CAACE,UAAT,GAAsBA,UAAtB;AACAF,UAAAA,QAAQ,CAACtB,WAAT,GAAuBuB,MAAvB;;AACA,cAAIA,MAAM,KAAK,CAAf,EAAkB;AAChBpB,YAAAA,IAAI,CAACuB,MAAL,CAAYrB,CAAZ,EAAe,CAAf;AACD;;AAED,cAAIW,eAAe,GACjBT,UAAU,CAAC,KAAKL,KAAL,CAAWc,eAAZ,CAAV,GACAT,UAAU,CAACa,KAAK,GAAGE,QAAQ,CAACG,KAAlB,CAFZ,CAZ2C,CAe3C;;AACA,eAAKV,QAAL,CAAc;AAAEC,YAAAA,eAAe,EAAEA,eAAe,CAACC,OAAhB,CAAwB,CAAxB;AAAnB,WAAd;AACAN,UAAAA,YAAY,CAACC,OAAb,CACE,iBADF,EAEEI,eAAe,CAACC,OAAhB,CAAwB,CAAxB,EAA2BC,QAA3B,EAFF;AAID;AACF;;AAED,WAAKH,QAAL,CAAc;AAAEZ,QAAAA,IAAI,EAAEA;AAAR,OAAd;AACAQ,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeX,IAAf,CAA7B;AACD,KAjMkB;;AAAA,SA+XnBwB,eA/XmB,GA+XDC,WAAW,IAAI;AAC/B,YAAMC,aAAa,GAAG,4CAAtB;AACA,YAAMC,QAAQ,GAAG,yCAAjB;AACA,YAAMC,OAAO,GAAI,GAAED,QAAS,GAAEF,WAAY,UAASC,aAAc,EAAjE;AACA,aAAOE,OAAP;AACD,KApYkB;;AAEjB,SAAK7B,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,EADK;AAEXF,MAAAA,MAAM,EAAE,EAFG;AAGXe,MAAAA,eAAe,EAAE,GAHN;AAIXgB,MAAAA,MAAM,EAAE;AAAEjC,QAAAA,MAAM,EAAE,CAAV;AAAa0B,QAAAA,KAAK,EAAE,CAApB;AAAuBD,QAAAA,UAAU,EAAE,CAAnC;AAAsCS,QAAAA,OAAO,EAAE,CAA/C;AAAkDC,QAAAA,UAAU,EAAE;AAA9D,OAJG;AAKXC,MAAAA,YAAY,EAAE;AAAEpC,QAAAA,MAAM,EAAE,CAAV;AAAa0B,QAAAA,KAAK,EAAE,CAApB;AAAuBQ,QAAAA,OAAO,EAAE;AAAhC;AALH,KAAb;AAOD;;AAEDG,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,OAAO,CAACC,GAAR,CAAY3B,YAAY,CAAC4B,OAAb,CAAqB,QAArB,CAAZ,EADkB,CAElB;;AACA,QACE5B,YAAY,CAAC4B,OAAb,CAAqB,QAArB,MAAmC,IAAnC,IACA5B,YAAY,CAAC4B,OAAb,CAAqB,QAArB,EAA+BjC,MAA/B,GAAwC,CAF1C,EAGE;AACA+B,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACA,YAAME,OAAO,GAAG,CACd,MADc,EAEd,MAFc,EAGd,KAHc,EAId,KAJc,EAKd,GALc,EAMd,GANc,EAOd,GAPc,EAQd,GARc,EASd,GATc,EAUd,GAVc,EAWd,GAXc,EAYd,GAZc,EAad,GAbc,EAcd,MAdc,EAed,KAfc,EAgBd,IAhBc,EAiBd,KAjBc,EAkBd,MAlBc,EAmBd,OAnBc,EAoBd,KApBc,EAqBd,KArBc,EAsBd,IAtBc,EAuBd,MAvBc,EAwBd,KAxBc,CAAhB;AA0BA,UAAIC,GAAG,GAAG,EAAV;;AACA,WAAK,IAAIpC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmC,OAAO,CAAClC,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvC,cAAMqC,GAAG,GAAG,KAAKf,eAAL,CAAqBa,OAAO,CAACnC,CAAD,CAA5B,CAAZ;AACAsC,QAAAA,KAAK,CAACD,GAAD,CAAL,CACGE,IADH,CACQC,CAAC,IAAIA,CAAC,CAACC,IAAF,EADb,EAEGF,IAFH,CAEQG,IAAI,IAAI;AACZ,cAAIC,MAAM,GAAG,EAAb;AACAA,UAAAA,MAAM,CAAC,QAAD,CAAN,GAAmBD,IAAI,CAAChD,MAAxB;AACAiD,UAAAA,MAAM,CAAC,SAAD,CAAN,GAAoBD,IAAI,CAACE,WAAzB;AACAD,UAAAA,MAAM,CAAC,aAAD,CAAN,GAAwB,CAAxB;AACAA,UAAAA,MAAM,CAAC,OAAD,CAAN,GAAkBD,IAAI,CAACG,WAAvB;AACAF,UAAAA,MAAM,CAAC,YAAD,CAAN,GAAuB,CAAvB;AACAP,UAAAA,GAAG,CAAC/B,IAAJ,CAASsC,MAAT;AACA,eAAKjC,QAAL,CAAc;AAAEd,YAAAA,MAAM,EAAEwC;AAAV,WAAd;AACD,SAXH;AAYD;;AACD9B,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BC,IAAI,CAACC,SAAL,CAAe2B,GAAf,CAA/B;;AACA,UAAI9B,YAAY,CAAC4B,OAAb,CAAqB,MAArB,KAAgC,IAApC,EAA0C;AACxC,aAAKxB,QAAL,CAAc;AACZZ,UAAAA,IAAI,EAAEU,IAAI,CAACsC,KAAL,CAAWxC,YAAY,CAAC4B,OAAb,CAAqB,MAArB,CAAX;AADM,SAAd;AAGD;;AACD,UAAI5B,YAAY,CAAC4B,OAAb,CAAqB,iBAArB,KAA2C,IAA/C,EAAqD;AACnD,aAAKxB,QAAL,CAAc;AACZC,UAAAA,eAAe,EAAET,UAAU,CAACI,YAAY,CAAC4B,OAAb,CAAqB,iBAArB,CAAD;AADf,SAAd;AAGD;AACF,KA1DD,MA0DO;AACL,WAAKxB,QAAL,CAAc;AACZZ,QAAAA,IAAI,EAAEU,IAAI,CAACsC,KAAL,CAAWxC,YAAY,CAAC4B,OAAb,CAAqB,MAArB,CAAX;AADM,OAAd;AAGA,WAAKxB,QAAL,CAAc;AACZd,QAAAA,MAAM,EAAEY,IAAI,CAACsC,KAAL,CAAWxC,YAAY,CAAC4B,OAAb,CAAqB,QAArB,CAAX;AADI,OAAd;AAGA,WAAKxB,QAAL,CAAc;AACZC,QAAAA,eAAe,EAAET,UAAU,CAACI,YAAY,CAAC4B,OAAb,CAAqB,iBAArB,CAAD;AADf,OAAd;AAGD;AACF;;AAEDa,EAAAA,QAAQ,CAACC,CAAD,EAAI;AACV,UAAMC,MAAM,GAAGD,CAAC,CAACE,aAAF,CAAgBC,YAAhB,CAA6B,OAA7B,CAAf;AACA,QAAIxB,MAAM,GAAG,KAAK9B,KAAL,CAAW8B,MAAxB;;AACA,QAAI,KAAK9B,KAAL,CAAW8B,MAAX,CAAkBsB,MAAlB,MAA8B,CAAC,CAAnC,EAAsC;AACpC,WAAKpD,KAAL,CAAWC,IAAX,CAAgBsD,IAAhB,CAAqB,UAASC,EAAT,EAAaC,EAAb,EAAiB;AACpC,eAAOD,EAAE,CAACJ,MAAD,CAAF,GAAaK,EAAE,CAACL,MAAD,CAAf,GAA0B,CAA1B,GAA8B,CAAC,CAAtC;AACD,OAFD;AAGAtB,MAAAA,MAAM,CAACsB,MAAD,CAAN,GAAiB,CAAjB;AACD,KALD,MAKO;AACL,WAAKpD,KAAL,CAAWC,IAAX,CAAgBsD,IAAhB,CAAqB,UAASC,EAAT,EAAaC,EAAb,EAAiB;AACpC,eAAOD,EAAE,CAACJ,MAAD,CAAF,GAAaK,EAAE,CAACL,MAAD,CAAf,GAA0B,CAAC,CAA3B,GAA+B,CAAtC;AACD,OAFD;AAGAtB,MAAAA,MAAM,CAACsB,MAAD,CAAN,GAAiB,CAAC,CAAlB;AACD;;AACD,SAAKvC,QAAL,CAAc;AAAEiB,MAAAA,MAAM,EAAEA;AAAV,KAAd;AACA,SAAKjB,QAAL,CAAc;AAAEZ,MAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC;AAAnB,KAAd;AACD;;AAEDyD,EAAAA,UAAU,CAACP,CAAD,EAAI;AACZ,UAAMC,MAAM,GAAGD,CAAC,CAACE,aAAF,CAAgBC,YAAhB,CAA6B,OAA7B,CAAf;AACA,QAAIrB,YAAY,GAAG,KAAKjC,KAAL,CAAW8B,MAA9B;;AACA,QAAI,KAAK9B,KAAL,CAAWiC,YAAX,CAAwBmB,MAAxB,MAAoC,CAAC,CAAzC,EAA4C;AAC1C,WAAKpD,KAAL,CAAWD,MAAX,CAAkBwD,IAAlB,CAAuB,UAASC,EAAT,EAAaC,EAAb,EAAiB;AACtC,eAAOD,EAAE,CAACJ,MAAD,CAAF,GAAaK,EAAE,CAACL,MAAD,CAAf,GAA0B,CAA1B,GAA8B,CAAC,CAAtC;AACD,OAFD;AAGAnB,MAAAA,YAAY,CAACmB,MAAD,CAAZ,GAAuB,CAAvB;AACD,KALD,MAKO;AACL,WAAKpD,KAAL,CAAWD,MAAX,CAAkBwD,IAAlB,CAAuB,UAASC,EAAT,EAAaC,EAAb,EAAiB;AACtC,eAAOD,EAAE,CAACJ,MAAD,CAAF,GAAaK,EAAE,CAACL,MAAD,CAAf,GAA0B,CAAC,CAA3B,GAA+B,CAAtC;AACD,OAFD;AAGAnB,MAAAA,YAAY,CAACmB,MAAD,CAAZ,GAAuB,CAAC,CAAxB;AACD;;AACD,SAAKvC,QAAL,CAAc;AAAEoB,MAAAA,YAAY,EAAEA;AAAhB,KAAd;AACA,SAAKpB,QAAL,CAAc;AAAEd,MAAAA,MAAM,EAAE,KAAKC,KAAL,CAAWD;AAArB,KAAd;AACD;;AA4ED4D,EAAAA,MAAM,GAAG;AACP,QAAIC,MAAM,GAAG;AACXC,MAAAA,GAAG,EAAE,CAAC,CAAD,EAAI,CAAJ,CADM;AAEXC,MAAAA,GAAG,EAAE,GAFM;AAGXC,MAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAHG;AAIXC,MAAAA,IAAI,EAAE,CAAC,GAAD,EAAM,CAAN,CAJK;AAKXC,MAAAA,CAAC,EAAE,CAAC,CAAD,EAAI,CAAJ,CALQ;AAMXC,MAAAA,GAAG,EAAE,CAAC,CAAC,EAAF,EAAM,EAAN,CANM;AAOXC,MAAAA,KAAK,EAAE,CAAC,GAAD,EAAM,CAAN,CAPI;AAQXC,MAAAA,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,CARI;AASXC,MAAAA,QAAQ,EAAE,KATC;AAUXC,MAAAA,KAAK,EAAE,CAAC,QAAD,EAAW,SAAX,CAVI;AAWXC,MAAAA,KAAK,EAAE,MAXI;AAYX;AACAC,MAAAA,MAAM,EAAE;AAbG,KAAb;;AAgBA,QAAIC,IAAI,CAACD,MAAL,KAAgB,IAApB,EAA0B;AACxBZ,MAAAA,MAAM,GAAGc,MAAM,CAACC,MAAP,CAAcf,MAAd,EAAsB;AAC7BgB,QAAAA,gBAAgB,EAAE,CAACC,GAAD,EAAMC,QAAN,KAAmB;AACnCD,UAAAA,GAAG,CAACE,SAAJ;AACAF,UAAAA,GAAG,CAACG,IAAJ,CACEF,QAAQ,CAACG,CAAT,CAAWC,CADb,EAEEJ,QAAQ,CAACG,CAAT,CAAWE,CAFb,EAGEL,QAAQ,CAACf,MAAT,GAAkB,CAHpB,EAIEe,QAAQ,CAACf,MAAT,GAAkB,CAJpB;AAMAc,UAAAA,GAAG,CAACO,SAAJ,GAAgBN,QAAQ,CAACR,KAAzB;AACAO,UAAAA,GAAG,CAACQ,IAAJ;AACAR,UAAAA,GAAG,CAACS,SAAJ;AACD;AAZ4B,OAAtB,CAAT;AAcD;;AAED,UAAMC,UAAU,GAAG,KAAKvF,KAAL,CAAWD,MAAX,CAAkByF,GAAlB,CAAsBC,KAAK,IAAI;AAChD,aAAO,oBAAC,WAAD;AAAa,QAAA,KAAK,EAAEA,KAApB;AAA2B,QAAA,QAAQ,EAAE,KAAK7F,aAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAFkB,CAAnB;AAIA,UAAM8F,WAAW,GAAG,KAAK1F,KAAL,CAAWC,IAAX,CAAgBuF,GAAhB,CAAoBC,KAAK,IAAI;AAC/C,aAAO,oBAAC,aAAD;AAAe,QAAA,KAAK,EAAEA,KAAtB;AAA6B,QAAA,MAAM,EAAE,KAAKxE,eAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD,KAFmB,CAApB;AAIA,WACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,WAAD;AAAa,MAAA,IAAI,EAAC,QAAlB;AAA2B,MAAA,MAAM,EAAE2C,MAAnC;AAA2C,MAAA,EAAE,EAAE,IAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,SAGE;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,EAAE,EAAC,cADL;AAEE,MAAA,SAAS,EAAC,KAFZ;AAGE,MAAA,KAAK,EAAE;AAAE+B,QAAAA,SAAS,EAAE,MAAb;AAAqBrB,QAAAA,KAAK,EAAE,OAA5B;AAAqCsB,QAAAA,SAAS,EAAE;AAAhD,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAQE;AAAK,MAAA,EAAE,EAAC,YAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yCACiC,KAAK5F,KAAL,CAAWc,eAD5C,CARF,EAWE;AACE,MAAA,SAAS,EAAC,sBADZ;AAEE,MAAA,KAAK,EAAE;AAAE+E,QAAAA,YAAY,EAAE;AAAhB,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAqB,MAAA,KAAK,EAAE;AAAEC,QAAAA,KAAK,EAAE;AAAT,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,EAAE,EAAC,YADL;AAEE,MAAA,KAAK,EAAE;AACLC,QAAAA,MAAM,EAAE,OADH;AAELD,QAAAA,KAAK,EAAE,MAFF;AAGLD,QAAAA,YAAY,EAAE,KAHT;AAILG,QAAAA,OAAO,EAAE;AAJJ,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASE;AACE,MAAA,SAAS,EAAC,2DADZ;AAEE,MAAA,KAAK,EAAE;AAAEF,QAAAA,KAAK,EAAE,MAAT;AAAiBC,QAAAA,MAAM,EAAE;AAAzB,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAIE;AAAO,MAAA,KAAK,EAAE;AAAED,QAAAA,KAAK,EAAE,MAAT;AAAiBxB,QAAAA,KAAK,EAAE;AAAxB,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,KAAK,EAAE;AAAEwB,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,MAAA,OAAO,EAAE3C,CAAC,IAAI,KAAKD,QAAL,CAAcC,CAAd,CAFhB;AAGE,MAAA,KAAK,EAAC,QAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAQE;AACE,MAAA,KAAK,EAAE;AAAE2C,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,MAAA,OAAO,EAAE3C,CAAC,IAAI,KAAKD,QAAL,CAAcC,CAAd,CAFhB;AAGE,MAAA,KAAK,EAAC,SAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBARF,EAeE;AACE,MAAA,KAAK,EAAE;AAAE2C,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,MAAA,OAAO,EAAE3C,CAAC,IAAI,KAAKD,QAAL,CAAcC,CAAd,CAFhB;AAGE,MAAA,KAAK,EAAC,aAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAfF,EAsBE;AACE,MAAA,KAAK,EAAE;AAAE2C,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,MAAA,OAAO,EAAE3C,CAAC,IAAI,KAAKD,QAAL,CAAcC,CAAd,CAFhB;AAGE,MAAA,KAAK,EAAC,OAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAtBF,EA6BE;AACE,MAAA,KAAK,EAAE;AAAE2C,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,MAAA,OAAO,EAAE3C,CAAC,IAAI,KAAKD,QAAL,CAAcC,CAAd,CAFhB;AAGE,MAAA,KAAK,EAAC,YAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BA7BF,EAoCE;AAAI,MAAA,KAAK,EAAE;AAAE2C,QAAAA,KAAK,EAAE;AAAT,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBApCF,EAqCE;AAAI,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBArCF,CADF,CAJF,EA6CE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAwB,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAQJ,WAAR,CADF,CA7CF,CATF,CADF,CAJF,CAXF,EA8EE;AACE,MAAA,EAAE,EAAC,cADL;AAEE,MAAA,SAAS,EAAC,KAFZ;AAGE,MAAA,KAAK,EAAE;AAAEC,QAAAA,SAAS,EAAE,MAAb;AAAqBrB,QAAAA,KAAK,EAAE,OAA5B;AAAqCsB,QAAAA,SAAS,EAAE;AAAhD,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBA9EF,EAsFE;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,EAAE,EAAC,cADL;AAEE,MAAA,KAAK,EAAE;AACLG,QAAAA,MAAM,EAAE,OADH;AAELD,QAAAA,KAAK,EAAE,MAFF;AAGLD,QAAAA,YAAY,EAAE,MAHT;AAILG,QAAAA,OAAO,EAAE;AAJJ,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OASE;AACE,MAAA,EAAE,EAAC,QADL;AAEE,MAAA,SAAS,EAAC,2DAFZ;AAGE,MAAA,KAAK,EAAE;AAAEF,QAAAA,KAAK,EAAE;AAAT,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKE;AAAO,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE,MAAT;AAAiBxB,QAAAA,KAAK,EAAE;AAAxB,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,EAAE,EAAC,WAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AACE,MAAA,KAAK,EAAE;AAAEwB,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,MAAA,OAAO,EAAE3C,CAAC,IAAI,KAAKO,UAAL,CAAgBP,CAAhB,CAFhB;AAGE,MAAA,KAAK,EAAC,QAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAQE;AACE,MAAA,KAAK,EAAE;AAAE2C,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,MAAA,OAAO,EAAE3C,CAAC,IAAI,KAAKO,UAAL,CAAgBP,CAAhB,CAFhB;AAGE,MAAA,KAAK,EAAC,SAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBARF,EAeE;AACE,MAAA,KAAK,EAAE;AAAE2C,QAAAA,KAAK,EAAE;AAAT,OADT;AAEE,MAAA,OAAO,EAAE3C,CAAC,IAAI,KAAKO,UAAL,CAAgBP,CAAhB,CAFhB;AAGE,MAAA,KAAK,EAAC,OAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAfF,EAsBE;AAAI,MAAA,KAAK,EAAE;AAAE2C,QAAAA,KAAK,EAAE;AAAT,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtBF,EAuBE;AAAI,MAAA,EAAE,EAAC,QAAP;AAAgB,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAvBF,CADF,CALF,EAmCE;AAAK,MAAA,SAAS,EAAC,QAAf;AAAwB,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAQP,UAAR,CADF,CAnCF,CATF,CADF,CAtFF,CAHF,CADF;AAgJD;;AA9XyB;;AAwY5B,eAAe9F,GAAf","sourcesContent":["import React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Table from \"react-bootstrap/Table\";\nimport ParticlesBg from \"particles-bg\";\nimport CurrentStocks from \"./CurrentStocks\";\nimport StockMarket from \"./StockMarket\";\n\nimport \"./App.css\";\nimport \"./animation.scss\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hold: [],\n      market: [],\n      totalShareValue: 0.0,\n      sorted: { symbol: 1, price: 1, totalValue: 1, company: 1, numOfShare: 1 },\n      sortedMarket: { symbol: 1, price: 1, company: 1 }\n    };\n  }\n\n  componentDidMount() {\n    console.log(localStorage.getItem(\"market\"));\n    //console.log(localStorage.getItem(\"market\").length);\n    if (\n      localStorage.getItem(\"market\") === null ||\n      localStorage.getItem(\"market\").length < 5\n    ) {\n      console.log(\"market is null\");\n      const symbols = [\n        \"CSCO\",\n        \"ADBE\",\n        \"NEW\",\n        \"BAC\",\n        \"A\",\n        \"F\",\n        \"C\",\n        \"D\",\n        \"X\",\n        \"O\",\n        \"K\",\n        \"I\",\n        \"V\",\n        \"ATVI\",\n        \"TXN\",\n        \"AA\",\n        \"DIS\",\n        \"AMZN\",\n        \"GOOGL\",\n        \"XOM\",\n        \"JNJ\",\n        \"GE\",\n        \"REAL\",\n        \"MMM\"\n      ];\n      var all = [];\n      for (var i = 0; i < symbols.length; i++) {\n        const url = this.urlForStockInfo(symbols[i]);\n        fetch(url)\n          .then(r => r.json())\n          .then(data => {\n            var stocks = {};\n            stocks[\"symbol\"] = data.symbol;\n            stocks[\"company\"] = data.companyName;\n            stocks[\"numOfShares\"] = 0;\n            stocks[\"price\"] = data.latestPrice;\n            stocks[\"totalValue\"] = 0;\n            all.push(stocks);\n            this.setState({ market: all });\n          });\n      }\n      localStorage.setItem(\"market\", JSON.stringify(all));\n      if (localStorage.getItem(\"hold\") != null) {\n        this.setState({\n          hold: JSON.parse(localStorage.getItem(\"hold\"))\n        });\n      }\n      if (localStorage.getItem(\"totalShareValue\") != null) {\n        this.setState({\n          totalShareValue: parseFloat(localStorage.getItem(\"totalShareValue\"))\n        });\n      }\n    } else {\n      this.setState({\n        hold: JSON.parse(localStorage.getItem(\"hold\"))\n      });\n      this.setState({\n        market: JSON.parse(localStorage.getItem(\"market\"))\n      });\n      this.setState({\n        totalShareValue: parseFloat(localStorage.getItem(\"totalShareValue\"))\n      });\n    }\n  }\n\n  sortHold(e) {\n    const target = e.currentTarget.getAttribute(\"value\");\n    var sorted = this.state.sorted;\n    if (this.state.sorted[target] === -1) {\n      this.state.hold.sort(function(o1, o2) {\n        return o1[target] < o2[target] ? 1 : -1;\n      });\n      sorted[target] = 1;\n    } else {\n      this.state.hold.sort(function(o1, o2) {\n        return o1[target] < o2[target] ? -1 : 1;\n      });\n      sorted[target] = -1;\n    }\n    this.setState({ sorted: sorted });\n    this.setState({ hold: this.state.hold });\n  }\n\n  sortMarket(e) {\n    const target = e.currentTarget.getAttribute(\"value\");\n    var sortedMarket = this.state.sorted;\n    if (this.state.sortedMarket[target] === -1) {\n      this.state.market.sort(function(o1, o2) {\n        return o1[target] < o2[target] ? 1 : -1;\n      });\n      sortedMarket[target] = 1;\n    } else {\n      this.state.market.sort(function(o1, o2) {\n        return o1[target] < o2[target] ? -1 : 1;\n      });\n      sortedMarket[target] = -1;\n    }\n    this.setState({ sortedMarket: sortedMarket });\n    this.setState({ market: this.state.market });\n  }\n\n  purchaseStock = (symbol, numOfShares) => {\n    var market = this.state.market,\n      hold = this.state.hold;\n    var newStock = {};\n    for (var i = 0; i < this.state.market.length; i++) {\n      if (this.state.market[i][\"symbol\"] === symbol) {\n        newStock[\"symbol\"] = symbol;\n        newStock[\"company\"] = this.state.market[i][\"company\"];\n        newStock[\"price\"] = this.state.market[i][\"price\"];\n        newStock[\"numOfShares\"] = numOfShares;\n        newStock[\"totalValue\"] =\n          parseFloat(numOfShares) * parseFloat(this.state.market[i][\"price\"]);\n      }\n    }\n    var hasStock = false;\n    if (this.state.hold != null) {\n      for (var i = 0; i < this.state.hold.length; i++) {\n        if (this.state.hold[i][\"symbol\"] === newStock[\"symbol\"]) {\n          hasStock = true;\n          hold[i][\"numOfShares\"] =\n            parseInt(newStock[\"numOfShares\"]) +\n            parseInt(hold[i][\"numOfShares\"]);\n          hold[i][\"totalValue\"] += newStock[\"totalValue\"];\n        }\n      }\n    }\n    if (hasStock === false) {\n      hold.push(newStock);\n    }\n    localStorage.setItem(\"market \", JSON.stringify(market));\n    this.setState({ hold: hold });\n    localStorage.setItem(\"hold\", JSON.stringify(hold));\n    var totalShareValue =\n      parseFloat(this.state.totalShareValue) +\n      parseFloat(newStock[\"totalValue\"]);\n    totalShareValue = totalShareValue.toFixed(2);\n    this.setState({ totalShareValue: totalShareValue });\n    localStorage.setItem(\"totalShareValue\", totalShareValue.toString());\n  };\n\n  stockOperations = (symbol, count) => {\n    var initNum;\n    count = parseInt(count);\n    var curStock;\n    var hold = this.state.hold;\n    for (var i = 0; i < this.state.hold.length; i++) {\n      if (this.state.hold[i][\"symbol\"] === symbol) {\n        curStock = this.state.hold[i];\n        initNum = parseInt(curStock.numOfShares);\n        const curNum = initNum + count;\n        var totalValue =\n          parseFloat(curStock.price) * parseFloat(curNum).toFixed(2);\n        curStock.totalValue = totalValue;\n        curStock.numOfShares = curNum;\n        if (curNum === 0) {\n          hold.splice(i, 1);\n        }\n\n        var totalShareValue =\n          parseFloat(this.state.totalShareValue) +\n          parseFloat(count * curStock.price);\n        //totalShareValue = parseFloat(totalShareValue).toFixed(2);\n        this.setState({ totalShareValue: totalShareValue.toFixed(2) });\n        localStorage.setItem(\n          \"totalShareValue\",\n          totalShareValue.toFixed(2).toString()\n        );\n      }\n    }\n\n    this.setState({ hold: hold });\n    localStorage.setItem(\"hold\", JSON.stringify(hold));\n  };\n\n  render() {\n    let config = {\n      num: [4, 7],\n      rps: 0.1,\n      radius: [5, 40],\n      life: [1.5, 3],\n      v: [2, 3],\n      tha: [-40, 40],\n      alpha: [0.6, 0],\n      scale: [0.1, 0.4],\n      position: \"all\",\n      color: [\"random\", \"#ff0000\"],\n      cross: \"dead\",\n      // emitter: \"follow\",\n      random: 15\n    };\n\n    if (Math.random() > 0.85) {\n      config = Object.assign(config, {\n        onParticleUpdate: (ctx, particle) => {\n          ctx.beginPath();\n          ctx.rect(\n            particle.p.x,\n            particle.p.y,\n            particle.radius * 2,\n            particle.radius * 2\n          );\n          ctx.fillStyle = particle.color;\n          ctx.fill();\n          ctx.closePath();\n        }\n      });\n    }\n\n    const recommends = this.state.market.map(stock => {\n      return <StockMarket stock={stock} purchase={this.purchaseStock} />;\n    });\n\n    const ownedStocks = this.state.hold.map(stock => {\n      return <CurrentStocks stock={stock} change={this.stockOperations} />;\n    });\n\n    return (\n      <div className=\"container\">\n        <ParticlesBg type=\"custom\" config={config} bg={true} />\n        .bb\n        <div className=\"content\">\n          <div\n            id=\"market-title\"\n            className=\"row\"\n            style={{ marginTop: \"40px\", color: \"white\", textAlign: \"left\" }}\n          >\n            Owned Stocks\n          </div>\n          <div id=\"totalValue\">\n            Your total portfolio value : ${this.state.totalShareValue}\n          </div>\n          <div\n            className=\"row currentPortfolio\"\n            style={{ marginBottom: \"40px\" }}\n          >\n            <div className=\"col\" style={{ width: \"100%\" }}>\n              <div\n                id=\"market-all\"\n                style={{\n                  height: \"310px\",\n                  width: \"100%\",\n                  marginBottom: \"5px\",\n                  padding: \"0px\"\n                }}\n              >\n                <table\n                  className=\"table table-hover table-responsive table-dark table-fixed\"\n                  style={{ width: \"100%\", height: \"320px\" }}\n                >\n                  <thead style={{ width: \"100%\", color: \"white\" }}>\n                    <tr>\n                      <th\n                        style={{ width: \"12%\" }}\n                        onClick={e => this.sortHold(e)}\n                        value=\"symbol\"\n                      >\n                        Symbol\n                      </th>\n                      <th\n                        style={{ width: \"25%\" }}\n                        onClick={e => this.sortHold(e)}\n                        value=\"company\"\n                      >\n                        Company Name\n                      </th>\n                      <th\n                        style={{ width: \"14%\" }}\n                        onClick={e => this.sortHold(e)}\n                        value=\"numOfShares\"\n                      >\n                        Num of Shares\n                      </th>\n                      <th\n                        style={{ width: \"16%\" }}\n                        onClick={e => this.sortHold(e)}\n                        value=\"price\"\n                      >\n                        Current Price\n                      </th>\n                      <th\n                        style={{ width: \"16%\" }}\n                        onClick={e => this.sortHold(e)}\n                        value=\"totalValue\"\n                      >\n                        Total Share Value\n                      </th>\n                      <th style={{ width: \"10%\" }}>Amount</th>\n                      <th style={{ width: \"10%\" }}>Operation</th>\n                    </tr>\n                  </thead>\n                  <div className=\"scroll\" style={{ width: \"100%\" }}>\n                    <tbody>{ownedStocks}</tbody>\n                  </div>\n                </table>\n              </div>\n            </div>\n          </div>\n\n          <div\n            id=\"market-title\"\n            className=\"row\"\n            style={{ marginTop: \"40px\", color: \"white\", textAlign: \"left\" }}\n          >\n            Stocks & Funds\n          </div>\n\n          <div className=\"row markets\">\n            <div\n              id=\"market-table\"\n              style={{\n                height: \"300px\",\n                width: \"100%\",\n                marginBottom: \"15px\",\n                padding: \"0px\"\n              }}\n            >\n              <table\n                id=\"market\"\n                className=\"table table-hover table-responsive table-dark table-fixed\"\n                style={{ width: \"100%\" }}\n              >\n                <thead style={{ width: \"100%\", color: \"white\" }}>\n                  <tr id=\"market-tr\">\n                    <th\n                      style={{ width: \"17%\" }}\n                      onClick={e => this.sortMarket(e)}\n                      value=\"symbol\"\n                    >\n                      Symbol\n                    </th>\n                    <th\n                      style={{ width: \"36%\" }}\n                      onClick={e => this.sortMarket(e)}\n                      value=\"company\"\n                    >\n                      Company Name\n                    </th>\n                    <th\n                      style={{ width: \"20%\" }}\n                      onClick={e => this.sortMarket(e)}\n                      value=\"price\"\n                    >\n                      Market Price\n                    </th>\n                    <th style={{ width: \"18%\" }}>Amount</th>\n                    <th id=\"submit\" style={{ width: \"18%\" }}>\n                      Operation\n                    </th>\n                  </tr>\n                </thead>\n\n                <div className=\"scroll\" style={{ width: \"100%\" }}>\n                  <tbody>{recommends}</tbody>\n                </div>\n              </table>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  urlForStockInfo = stockSymbol => {\n    const api_key_param = \"token=pk_0450ab0ad32942a480c3e7330fd353c5 \";\n    const base_url = \"https://cloud.iexapis.com/stable/stock/\";\n    const api_url = `${base_url}${stockSymbol}/quote?${api_key_param}`;\n    return api_url;\n  };\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}